(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,10846,e=>{"use strict";var s=e.i(43476),t=e.i(71645),a=e.i(66027),r=e.i(54616),l=e.i(9165),i=e.i(54338);function n(){let e,{data:n}=(0,i.useGetCurrentUser)(),[o,c]=(0,t.useState)(""),[d,x]=(0,t.useState)({specialties:"",location:"",proximity:!1}),{data:m,isLoading:u,error:p}=(e={query:o,specialties:d.specialties,location:d.location,proximity:d.proximity},(0,a.useQuery)({queryKey:["experts",e],queryFn:async()=>(await l.expertsAPI.search(e||{})).data.data.experts})),h=(0,r.useMutation)({mutationFn:async e=>(await l.expertsAPI.saveExpert(e)).data,onSuccess:e=>{e.success&&console.log("Expert saved successfully")},onError:e=>{console.error("Error saving expert:",e)}}),g=(0,r.useMutation)({mutationFn:async({expertId:e,meetingData:s})=>(await l.expertsAPI.requestMeeting(e,s)).data,onSuccess:e=>{e.success&&(e.requiresManualContact?alert("Meeting request submitted to admin. The expert will be contacted manually."):alert("Meeting request sent to expert successfully!"))},onError:e=>{console.error("Error requesting meeting:",e),alert("Failed to send meeting request. Please try again.")}}),y=(0,r.useMutation)({mutationFn:async e=>(await l.expertsAPI.nudgeExpert(e)).data,onSuccess:e=>{e.success&&alert("Expert has been nudged to join the platform!")},onError:e=>{console.error("Error nudging expert:",e),alert("Failed to nudge expert. Please try again.")}}),b=n?.role==="patient";return p?(0,s.jsx)("div",{className:"min-h-screen flex items-center justify-center",children:(0,s.jsxs)("div",{className:"text-red-600",children:["Error loading experts: ",p.message]})}):(0,s.jsxs)("div",{className:"space-y-6",children:[(0,s.jsxs)("div",{className:"bg-white rounded-lg shadow-sm p-6",children:[(0,s.jsx)("h1",{className:"text-2xl font-bold text-gray-900",children:b?"Health Experts":"Collaborators"}),(0,s.jsx)("p",{className:"text-gray-600 mt-2",children:b?"Connect with medical experts specializing in your conditions":"Discover researchers with similar interests for collaboration"})]}),(0,s.jsx)("div",{className:"bg-white rounded-lg shadow-sm p-6",children:(0,s.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[(0,s.jsxs)("div",{className:"md:col-span-2",children:[(0,s.jsxs)("label",{htmlFor:"search",className:"block text-sm font-medium text-gray-700 mb-1",children:["Search ",b?"Experts":"Collaborators"]}),(0,s.jsx)("input",{type:"text",id:"search",placeholder:"Search by name, specialty, or institution...",value:o,onChange:e=>c(e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{htmlFor:"specialty",className:"block text-sm font-medium text-gray-700 mb-1",children:"Specialty"}),(0,s.jsx)("input",{type:"text",id:"specialty",placeholder:"e.g., Oncology",value:d.specialties,onChange:e=>x(s=>({...s,specialties:e.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{htmlFor:"location",className:"block text-sm font-medium text-gray-700 mb-1",children:"Location"}),(0,s.jsx)("div",{className:"flex space-x-2",children:(0,s.jsx)("input",{type:"text",id:"location",placeholder:"Country or city",value:d.location,onChange:e=>x(s=>({...s,location:e.target.value})),className:"flex-1 px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"})}),(0,s.jsxs)("div",{className:"mt-2 flex items-center",children:[(0,s.jsx)("input",{type:"checkbox",id:"proximity",checked:d.proximity,onChange:e=>x(s=>({...s,proximity:e.target.checked})),className:"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded"}),(0,s.jsx)("label",{htmlFor:"proximity",className:"ml-2 text-sm text-gray-700",children:"Show nearby only"})]})]})]})}),(0,s.jsx)("div",{className:"bg-white rounded-lg shadow-sm",children:u?(0,s.jsxs)("div",{className:"p-8 text-center",children:[(0,s.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto"}),(0,s.jsxs)("p",{className:"mt-4 text-gray-600",children:["Searching for ",b?"experts":"collaborators","..."]})]}):(0,s.jsxs)("div",{className:"p-6",children:[(0,s.jsxs)("h2",{className:"text-lg font-semibold text-gray-900 mb-4",children:[m?.length||0," ",b?"Experts":"Collaborators"," Found"]}),(0,s.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:m?.map(e=>(0,s.jsxs)("div",{className:"border border-gray-200 rounded-lg p-6 hover:shadow-md transition-shadow",children:[(0,s.jsxs)("div",{className:"flex justify-between items-start mb-4",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("h3",{className:"text-lg font-semibold text-gray-900",children:e.name}),(0,s.jsx)("p",{className:"text-gray-600 text-sm",children:e.institution}),(0,s.jsx)("p",{className:"text-gray-500 text-sm",children:e.position})]}),(0,s.jsx)("button",{onClick:()=>{var s;return s=e._id,void h.mutate(s)},disabled:h.isPending,className:"text-gray-400 hover:text-yellow-500 transition-colors disabled:opacity-50",title:"Save to favorites",children:"â­"})]}),e.location?.country&&(0,s.jsxs)("p",{className:"text-gray-500 text-sm mb-3",children:["ðŸ“ ",e.location.city&&`${e.location.city}, `,e.location.country]}),(0,s.jsxs)("div",{className:"mb-4",children:[(0,s.jsx)("h4",{className:"text-sm font-medium text-gray-700 mb-1",children:"Specialties:"}),(0,s.jsxs)("div",{className:"flex flex-wrap gap-1",children:[e.specialties?.slice(0,3).map((e,t)=>(0,s.jsx)("span",{className:"inline-block bg-blue-100 text-blue-800 text-xs px-2 py-1 rounded",children:e},t)),e.specialties&&e.specialties.length>3&&(0,s.jsxs)("span",{className:"text-xs text-gray-500",children:["+",e.specialties.length-3," more"]})]})]}),(0,s.jsxs)("div",{className:"mb-4",children:[(0,s.jsx)("h4",{className:"text-sm font-medium text-gray-700 mb-1",children:"Research Interests:"}),(0,s.jsx)("p",{className:"text-sm text-gray-600 line-clamp-2",children:e.researchInterests?.join(", ")})]}),(0,s.jsxs)("div",{className:"flex justify-between items-center",children:[(0,s.jsxs)("div",{className:"flex items-center space-x-2",children:[e.isOnPlatform?(0,s.jsx)("span",{className:"px-2 py-1 text-xs bg-green-100 text-green-800 rounded-full",children:"On Platform"}):(0,s.jsx)("span",{className:"px-2 py-1 text-xs bg-yellow-100 text-yellow-800 rounded-full",children:"External Expert"}),e.isAvailableForMeetings&&(0,s.jsx)("span",{className:"px-2 py-1 text-xs bg-blue-100 text-blue-800 rounded-full",children:"Available for Meetings"})]}),(0,s.jsxs)("div",{className:"flex space-x-2",children:[!e.isOnPlatform&&(0,s.jsx)("button",{onClick:()=>{var s;return s=e._id,void y.mutate(s)},disabled:y.isPending,className:"text-sm text-orange-600 hover:text-orange-700 font-medium disabled:opacity-50",children:"Nudge"}),(0,s.jsx)("button",{onClick:()=>{g.mutate({expertId:e._id,meetingData:{message:`Meeting request from ${n?.profile?.firstName||"user"}`,preferredDates:[]}})},disabled:g.isPending,className:"text-sm text-blue-600 hover:text-blue-700 font-medium disabled:opacity-50",children:b?"Request Meeting":"Connect"})]})]})]},e._id))}),(!m||0===m.length)&&(0,s.jsx)("div",{className:"text-center py-8",children:(0,s.jsxs)("p",{className:"text-gray-500",children:["No ",b?"experts":"collaborators"," found. Try adjusting your search criteria."]})})]})})]})}e.s(["default",()=>n],10846)}]);